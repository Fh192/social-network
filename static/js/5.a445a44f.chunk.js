(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[5],{263:function(e,t,c){e.exports={toggle:"Toggle_toggle__Cn-wh",toggleD:"Toggle_toggleD__1Jmtu"}},264:function(e,t,c){e.exports={filterUsers:"FilterUsers_filterUsers__2Y9vA",arrowD:"FilterUsers_arrowD__ti3pG",title:"FilterUsers_title__ibg5D",popup:"FilterUsers_popup__vK8hg",popupD:"FilterUsers_popupD__1fd-H",showPopup:"FilterUsers_showPopup__2lqB3",magnifier:"FilterUsers_magnifier__3iqA5",clearTerm:"FilterUsers_clearTerm__1acry",clearTermVisible:"FilterUsers_clearTermVisible__1q3Ce",term:"FilterUsers_term__2EUx0",toggles:"FilterUsers_toggles__-zNm1",page:"FilterUsers_page__3kMlJ",pageD:"FilterUsers_pageD__k70Xf",maxPage:"FilterUsers_maxPage__34xRO"}},265:function(e,t,c){e.exports={user:"User_user__38FXz",userD:"User_userD__3jNih",link:"User_link__1YDXP",followBtn:"User_followBtn__2PlbX",photo:"User_photo__4Rk8a",photoPreloader:"User_photoPreloader__35SVO",col:"User_col__1cFGU",username:"User_username__2XOY2"}},266:function(e,t,c){e.exports={users:"Users_users__3jhox",header:"Users_header__3yG7n",headerD:"Users_headerD__1n0GV",usersList:"Users_usersList__3sOPG",scrollBtn:"Users_scrollBtn__1zp-Y",preloader:"Users_preloader__2hxbA",notFound:"Users_notFound__3r61_",notFoundD:"Users_notFoundD__1qkZZ",text:"Users_text__3g89f",term:"Users_term__21juF"}},267:function(e,t,c){e.exports={scrollBtn:"ScrollBtn_scrollBtn__3d0oL",scrollBtnD:"ScrollBtn_scrollBtnD__2MZjE",visible:"ScrollBtn_visible__17p76"}},272:function(e,t,c){"use strict";c.r(t);var n=c(11),r=c(2),s=c(1),a=c(18),o=c(9),i=c(39),l=c(17),u=c(8),j=c.n(u),d=c(33),b=c(5),O=c(0),f=function(e){var t=e.size,c=e.type,r=e.color,s=void 0===r?"#0d1117":r,a={transition:"all 0.2s ease",transform:"rotateX(0deg)"};return"up"===c&&(a=Object(n.a)(Object(n.a)({},a),{},{transform:"rotateX(180deg)"})),Object(O.jsx)("svg",{style:a,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",width:t,height:t,viewBox:"0 0 451.847 451.847",xmlSpace:"preserve",children:Object(O.jsx)("g",{children:Object(O.jsx)("path",{fill:s,d:"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751   c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0   c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"})})})},p=c(24),m=function(e){var t=e.size;return Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:t,height:t,viewBox:"0 0 30.239 30.239",enableBackground:"new 0 0 30.239 30.239",xmlSpace:"preserve",children:Object(O.jsx)("g",{children:Object(O.jsx)("path",{d:"M20.194,3.46c-4.613-4.613-12.121-4.613-16.734,0c-4.612,4.614-4.612,12.121,0,16.735   c4.108,4.107,10.506,4.547,15.116,1.34c0.097,0.459,0.319,0.897,0.676,1.254l6.718,6.718c0.979,0.977,2.561,0.977,3.535,0   c0.978-0.978,0.978-2.56,0-3.535l-6.718-6.72c-0.355-0.354-0.794-0.577-1.253-0.674C24.743,13.967,24.303,7.57,20.194,3.46z    M18.073,18.074c-3.444,3.444-9.049,3.444-12.492,0c-3.442-3.444-3.442-9.048,0-12.492c3.443-3.443,9.048-3.443,12.492,0   C21.517,9.026,21.517,14.63,18.073,18.074z"})})})},h=c(263),_=c.n(h),g=function(e){var t=e.checked,c=e.disabled,n=e.onChange,r=j.a.bind(_.a),s=Object(b.a)().isDarkMode;return Object(O.jsx)("input",{className:r({toggle:!0,toggleD:s}),type:"checkbox",checked:t,disabled:c,onChange:n})},x=c(264),v=c.n(x),w=function(e){var t=e.fetching,c=e.queryParams,a=e.pageCount,o=e.setQueryParams,l=Object(d.b)(),u=j.a.bind(v.a),h=Object(s.useRef)(null),_=Object(b.a)().isDarkMode,x=Object(s.useState)("down"),w=Object(r.a)(x,2),U=w[0],k=w[1],N=Object(s.useState)(!0===c.friend),D=Object(r.a)(N,2),E=D[0],F=D[1],C=Object(s.useState)(!1===c.friend),T=Object(r.a)(C,2),P=T[0],y=T[1],S=Object(s.useState)(c.term||""),B=Object(r.a)(S,2),L=B[0],z=B[1],M=Object(s.useState)(c.page),X=Object(r.a)(M,2),Y=X[0],q=X[1],G=Object(s.useCallback)((function(){o((function(e){return L.trim()&&L.trim()!==e.term?(l(Object(i.c)()),Object(n.a)(Object(n.a)({},e),{},{term:L,page:1})):e}))}),[L,o,l]),R=function(e){e&&"Enter"!==e.key||G()};return Object(s.useEffect)((function(){var e=function(e){e.deltaY>0&&k("down")};return document.addEventListener("wheel",e),function(){return document.removeEventListener("wheel",e)}}),[]),Object(s.useEffect)((function(){var e=!!E||!P&&void 0;o((function(t){return e!==t.friend?(l(Object(i.c)()),Object(n.a)(Object(n.a)({},t),{},{friend:e,term:L||void 0,page:1})):t}))}),[E,P,L,l,o]),Object(s.useEffect)((function(){var e=setTimeout((function(){o((function(e){if(Y!==e.page){if(!(1===e.page&&Y<1))return l(Object(i.c)()),Y<=0?Object(n.a)(Object(n.a)({},e),{},{page:1}):Object(n.a)(Object(n.a)({},e),{},{page:Y});q(1)}return e})),clearTimeout(e)}),1e3);return function(){return clearTimeout(e)}}),[Y,o,l]),Object(s.useEffect)((function(){void 0===c.friend?(F(!1),y(!1)):c.friend?(F(!0),y(!1)):(F(!1),y(!0)),q(c.page),z(c.term||"")}),[c]),Object(s.useEffect)((function(){var e=setTimeout((function(){G(),clearTimeout(e)}),1e3);return function(){return clearTimeout(e)}}),[G]),Object(b.c)(h,(function(){k("down")})),Object(O.jsxs)("div",{className:v.a.filterUsers,ref:h,children:[Object(O.jsxs)("div",{className:v.a.title,onClick:function(){k((function(e){return"down"===e?"up":"down"}))},children:[Object(O.jsx)("span",{children:"Parameters"}),Object(O.jsx)("div",{className:u({arrow:!0,arrowD:_}),children:Object(O.jsx)(f,{size:"10px",type:U,color:"#8ea6f4"})})]}),Object(O.jsxs)("div",{className:u({popup:!0,popupD:_,showPopup:"up"===U}),children:[Object(O.jsxs)("div",{className:v.a.term,children:[Object(O.jsx)("div",{className:v.a.magnifier,onClick:function(){return R()},children:Object(O.jsx)(m,{size:"15px"})}),Object(O.jsx)("input",{type:"text",id:"term",placeholder:"Search",autoComplete:"off",value:L,disabled:t,onChange:function(e){return z(e.currentTarget.value)},onKeyDown:R}),Object(O.jsx)("div",{className:u({clearTerm:!0,clearTermVisible:!!L.trim()}),onClick:function(){z(""),o((function(e){return void 0!==e.term?(l(Object(i.c)()),Object(n.a)(Object(n.a)({},e),{},{term:void 0,page:1})):e}))},children:Object(O.jsx)(p.a,{size:"15px"})})]}),Object(O.jsxs)("div",{className:v.a.toggles,children:[Object(O.jsxs)("label",{children:[Object(O.jsx)(g,{onChange:function(e){P&&y(!1),F(e.currentTarget.checked)},checked:E,disabled:t}),Object(O.jsx)("span",{children:"Only friends"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)(g,{onChange:function(e){E&&F(!1),y(e.currentTarget.checked)},checked:P,disabled:t}),Object(O.jsx)("span",{children:"Hide friends"})]})]}),Object(O.jsxs)("div",{className:u({page:!0,pageD:_}),children:[Object(O.jsx)("input",{type:"text",inputMode:"numeric",id:"page",value:Y,autoComplete:"off",onChange:function(e){var t=+e.target.value;t<=a&&q(t)}}),Object(O.jsxs)("label",{htmlFor:"page",children:["Page ",Object(O.jsxs)("sup",{className:v.a.maxPage,children:["max: ",a]})]})]})]})]})},U=c(265),k=c.n(U),N=c(16),D=c(19),E=c(61),F=c(12),C=function(e){var t=e.photos.large,c=e.followed,n=e.id,a=e.name,i=j.a.bind(k.a),u=Object(s.useState)(!1),d=Object(r.a)(u,2),f=d[0],p=d[1],m=Object(b.a)().isDarkMode,h=Object(o.a)((function(e){return e.users.inFollowProgress.some((function(e){return e===n}))}));return Object(O.jsxs)("li",{className:i({user:!0,userD:m}),children:[Object(O.jsx)(F.b,{className:k.a.link,to:"/profile/".concat(n)}),Object(O.jsxs)("div",{className:k.a.photo,children:[Object(O.jsx)(F.b,{to:"/profile/".concat(n),children:Object(O.jsx)("img",{src:t||(m?D.a:N.a),onLoad:function(){return p(!0)},loading:"lazy",alt:"user"})}),!f&&Object(O.jsx)("div",{className:k.a.photoPreloader,children:Object(O.jsx)(l.a,{})})]}),Object(O.jsxs)("div",{className:k.a.col,children:[Object(O.jsx)("div",{className:k.a.username,children:Object(O.jsx)("span",{children:a})}),Object(O.jsx)("div",{className:k.a.followBtn,children:Object(O.jsx)(E.a,{inFollowProcess:h,followed:c,userId:n})})]})]})},T=c(4),P=c(266),y=c.n(P),S=c(267),B=c.n(S),L=function(){var e=j.a.bind(B.a),t=Object(b.a)().isDarkMode,c=Object(s.useState)("up"),n=Object(r.a)(c,2),a=n[0],o=n[1],i=Object(s.useState)(0),l=Object(r.a)(i,2),u=l[0],d=l[1],p=Object(s.useState)(!1),m=Object(r.a)(p,2),h=m[0],_=m[1];return Object(s.useEffect)((function(){var e=document.scrollingElement,t=function(t){e.scrollTop<=500?(_(!1),d(0)):t.deltaY<0?(o("up"),_(!0)):_(!1)};return document.addEventListener("wheel",t),function(){return document.removeEventListener("wheel",t)}}),[]),Object(s.useEffect)((function(){var e=document.scrollingElement,t=0,c=0,n=function(e){t=e.changedTouches[0].screenY},r=function(n){c=n.changedTouches[0].screenY,e.scrollTop<=500&&c!==t?(_(!1),d(0)):(c<t&&_(!1),c>t&&(o("up"),_(!0)))};return document.addEventListener("touchstart",n),document.addEventListener("touchend",r),function(){document.removeEventListener("touchstart",n),document.removeEventListener("touchend",r)}}),[]),Object(O.jsx)("div",{className:e({scrollBtn:!0,visible:h,scrollBtnD:t}),onClick:function(){var e=document.scrollingElement;if(e){var t="up"===a?0:u;e.scroll({behavior:"smooth",top:t}),d(e.scrollTop),o((function(e){return"down"===e?"up":"down"}))}},children:Object(O.jsx)("button",{children:Object(O.jsx)(f,{size:"20px",type:a,color:t?"#8ea6f4":"#1c3177"})})})};t.default=function(){var e=j.a.bind(y.a),t=Object(a.a)(),c=Object(T.h)(),u=new URLSearchParams(Object(T.g)().search),d=Object(o.a)((function(e){return e.users})),f=d.totalCount,p=d.users,m=Object(b.a)().isDarkMode,h=Object(s.useState)(!1),_=Object(r.a)(h,2),g=_[0],x=_[1],v=Object(s.useState)({count:40,page:Number(u.get("page"))||1,term:u.get("term")||void 0,friend:!!u.get("friend")||void 0}),U=Object(r.a)(v,2),k=U[0],N=U[1],D=Math.ceil((f||1)/k.count),E=Object(s.useCallback)((function(){var e=k.page,t=k.friend,n=k.term,s=Object.entries({friend:t,term:n}).reduce((function(e,t){var c=Object(r.a)(t,2),n=c[0],s=c[1];return void 0!==s?"".concat(e,"&").concat(n,"=").concat(s):e}),"?page=".concat(e));c({search:s})}),[k,c]);return Object(s.useEffect)((function(){var e=document.scrollingElement,t=function(){var t=e.scrollTop,c=e.scrollHeight,r=e.clientHeight;!g&&f&&t+r>=c-500&&k.page<D&&(x(!0),N((function(e){return Object(n.a)(Object(n.a)({},e),{},{page:e.page+1})})))};return document.addEventListener("scroll",t),function(){return document.removeEventListener("scroll",t)}}),[f,g,D,k.page]),Object(s.useEffect)((function(){x(!0),t(Object(i.b)(k)).then((function(){x(!1),E()}))}),[t,k,E]),Object(s.useEffect)((function(){return function(){t(Object(i.c)())}}),[t]),Object(O.jsxs)("div",{className:y.a.users,children:[Object(O.jsxs)("div",{className:e({header:!0,headerD:m}),children:[Object(O.jsx)("div",{className:y.a.usersFound,children:Object(O.jsxs)("span",{children:["Users found: ",null===f||void 0===f?void 0:f.toLocaleString()]})}),Object(O.jsx)(w,{queryParams:k,setQueryParams:N,fetching:g,pageCount:D})]}),null===f?Object(O.jsx)("div",{className:y.a.preloader,children:Object(O.jsx)(l.a,{})}):f&&p.length?Object(O.jsxs)("ul",{className:y.a.usersList,children:[p.map((function(e){return Object(s.createElement)(C,Object(n.a)(Object(n.a)({},e),{},{key:e.id}))})),g&&Object(O.jsx)("div",{className:y.a.preloader,children:Object(O.jsx)(l.a,{})})]}):Object(O.jsxs)("div",{className:e({notFound:!0,notFoundD:m}),children:[Object(O.jsx)("div",{className:y.a.text,children:k.friend?Object(O.jsxs)("span",{children:["Friend",Object(O.jsx)("span",{className:y.a.term,children:' "'.concat(k.term,'" ')}),"not found"]}):Object(O.jsxs)("span",{children:["No results for",Object(O.jsx)("span",{className:y.a.term,children:' "'.concat(k.term,'" ')})]})}),Object(O.jsx)("button",{type:"reset",onClick:function(){t(Object(i.c)()),N((function(e){return Object(n.a)(Object(n.a)({},e),{},{page:1,term:void 0,friend:void 0})}))},children:"Reset params"})]}),Object(O.jsx)("div",{className:y.a.scrollBtn,children:Object(O.jsx)(L,{})})]})}}}]);
//# sourceMappingURL=5.a445a44f.chunk.js.map