(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[5],{260:function(e,t,c){e.exports={toggle:"Toggle_toggle__Cn-wh",toggleD:"Toggle_toggleD__1Jmtu"}},261:function(e,t,c){e.exports={filterUsers:"FilterUsers_filterUsers__2Y9vA",arrowD:"FilterUsers_arrowD__ti3pG",title:"FilterUsers_title__ibg5D",popup:"FilterUsers_popup__vK8hg",popupD:"FilterUsers_popupD__1fd-H",showPopup:"FilterUsers_showPopup__2lqB3",magnifier:"FilterUsers_magnifier__3iqA5",clearTerm:"FilterUsers_clearTerm__1acry",clearTermVisible:"FilterUsers_clearTermVisible__1q3Ce",term:"FilterUsers_term__2EUx0",toggles:"FilterUsers_toggles__-zNm1",page:"FilterUsers_page__3kMlJ",maxPage:"FilterUsers_maxPage__34xRO"}},262:function(e,t,c){e.exports={user:"User_user__38FXz",userD:"User_userD__3jNih",link:"User_link__1YDXP",followBtn:"User_followBtn__2PlbX",photo:"User_photo__4Rk8a",photoPreloader:"User_photoPreloader__35SVO",col:"User_col__1cFGU",username:"User_username__2XOY2"}},263:function(e,t,c){e.exports={users:"Users_users__3jhox",header:"Users_header__3yG7n",headerD:"Users_headerD__1n0GV",usersList:"Users_usersList__3sOPG",preloader:"Users_preloader__2hxbA",notFound:"Users_notFound__3r61_",notFoundText:"Users_notFoundText__2b49X",term:"Users_term__21juF"}},264:function(e,t,c){e.exports={scrollBtn:"ScrollBtn_scrollBtn__3d0oL",scrollBtnD:"ScrollBtn_scrollBtnD__2MZjE",visible:"ScrollBtn_visible__17p76"}},269:function(e,t,c){"use strict";c.r(t);var n=c(11),r=c(5),s=c(1),a=c(17),o=c(8),i=c(37),l=c(22),u=c(10),j=c.n(u),d=c(31),b=c(4),O=c(0),p=function(e){var t=e.size,c=e.type,r=e.color,s=void 0===r?"#0d1117":r,a={transition:"all 0.2s ease",transform:"rotateX(0deg)"};return"up"===c&&(a=Object(n.a)(Object(n.a)({},a),{},{transform:"rotateX(180deg)"})),Object(O.jsx)("svg",{style:a,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",width:t,height:t,viewBox:"0 0 451.847 451.847",xmlSpace:"preserve",children:Object(O.jsx)("g",{children:Object(O.jsx)("path",{fill:s,d:"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751   c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0   c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"})})})},f=c(27),m=function(e){var t=e.size;return Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:t,height:t,viewBox:"0 0 30.239 30.239",enableBackground:"new 0 0 30.239 30.239",xmlSpace:"preserve",children:Object(O.jsx)("g",{children:Object(O.jsx)("path",{d:"M20.194,3.46c-4.613-4.613-12.121-4.613-16.734,0c-4.612,4.614-4.612,12.121,0,16.735   c4.108,4.107,10.506,4.547,15.116,1.34c0.097,0.459,0.319,0.897,0.676,1.254l6.718,6.718c0.979,0.977,2.561,0.977,3.535,0   c0.978-0.978,0.978-2.56,0-3.535l-6.718-6.72c-0.355-0.354-0.794-0.577-1.253-0.674C24.743,13.967,24.303,7.57,20.194,3.46z    M18.073,18.074c-3.444,3.444-9.049,3.444-12.492,0c-3.442-3.444-3.442-9.048,0-12.492c3.443-3.443,9.048-3.443,12.492,0   C21.517,9.026,21.517,14.63,18.073,18.074z"})})})},h=c(260),g=c.n(h),_=function(e){var t=e.checked,c=e.disabled,n=e.onChange,r=j.a.bind(g.a),s=Object(b.a)().isDarkMode;return Object(O.jsx)("input",{className:r({toggle:!0,toggleD:s}),type:"checkbox",checked:t,disabled:c,onChange:n})},x=c(261),v=c.n(x),w=function(e){var t=e.fetching,c=e.queryParams,a=e.pageCount,o=e.setQueryParams,l=Object(d.b)(),u=j.a.bind(v.a),h=Object(s.useRef)(null),g=Object(b.a)().isDarkMode,x=Object(s.useState)("down"),w=Object(r.a)(x,2),U=w[0],k=w[1],N=Object(s.useState)(!0===c.friend),F=Object(r.a)(N,2),E=F[0],D=F[1],T=Object(s.useState)(!1===c.friend),C=Object(r.a)(T,2),P=C[0],S=C[1],y=Object(s.useState)(c.term||""),L=Object(r.a)(y,2),B=L[0],z=L[1],M=Object(s.useState)(c.page),X=Object(r.a)(M,2),Y=X[0],q=X[1],G=Object(s.useCallback)((function(){o((function(e){return B.trim()&&B.trim()!==e.term?(l(Object(i.c)()),Object(n.a)(Object(n.a)({},e),{},{term:B,page:1})):e}))}),[B,o,l]),V=function(e){e&&"Enter"!==e.key||G()};Object(s.useEffect)((function(){var e=setTimeout((function(){G(),clearTimeout(e)}),1e3);return function(){return clearTimeout(e)}}),[G]);Object(s.useEffect)((function(){var e=function(e){e.deltaY>0&&k("down")};return document.addEventListener("wheel",e),function(){return document.removeEventListener("wheel",e)}}),[]),Object(s.useEffect)((function(){var e=!!E||!P&&void 0;o((function(t){return e!==t.friend?(l(Object(i.c)()),Object(n.a)(Object(n.a)({},t),{},{friend:e,term:B||void 0,page:1})):t}))}),[E,P,B,l,o]);return Object(s.useEffect)((function(){var e=setTimeout((function(){o((function(e){if(Y!==e.page){if(!(1===e.page&&Y<1))return l(Object(i.c)()),Y<=0?(q(1),Object(n.a)(Object(n.a)({},e),{},{page:1})):Object(n.a)(Object(n.a)({},e),{},{page:Y});q(1)}return e})),clearTimeout(e)}),1e3);return function(){return clearTimeout(e)}}),[Y,o,l]),Object(s.useEffect)((function(){q(c.page)}),[c.page]),Object(b.c)(h,(function(){k("down")})),Object(O.jsxs)("div",{className:v.a.filterUsers,ref:h,children:[Object(O.jsxs)("div",{className:v.a.title,onClick:function(){k((function(e){return"down"===e?"up":"down"}))},children:[Object(O.jsx)("span",{children:"Parameters"}),Object(O.jsx)("div",{className:u({arrow:!0,arrowD:g}),children:Object(O.jsx)(p,{size:"10px",type:U,color:"#8ea6f4"})})]}),Object(O.jsxs)("div",{className:u({popup:!0,popupD:g,showPopup:"up"===U}),children:[Object(O.jsxs)("div",{className:v.a.term,children:[Object(O.jsx)("div",{className:v.a.magnifier,onClick:function(){return V()},children:Object(O.jsx)(m,{size:"15px"})}),Object(O.jsx)("input",{type:"text",id:"term",placeholder:"Search",autoComplete:"off",value:B,disabled:t,onChange:function(e){return z(e.currentTarget.value)},onKeyDown:V}),Object(O.jsx)("div",{className:u({clearTerm:!0,clearTermVisible:!!B.trim()}),onClick:function(){z(""),o((function(e){return void 0!==e.term?(l(Object(i.c)()),Object(n.a)(Object(n.a)({},e),{},{term:void 0,page:1})):e}))},children:Object(O.jsx)(f.a,{size:"15px"})})]}),Object(O.jsxs)("div",{className:v.a.toggles,children:[Object(O.jsxs)("label",{children:[Object(O.jsx)(_,{onChange:function(e){P&&S(!1),D(e.currentTarget.checked)},checked:E,disabled:t}),Object(O.jsx)("span",{children:"Only friends"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)(_,{onChange:function(e){E&&D(!1),S(e.currentTarget.checked)},checked:P,disabled:t}),Object(O.jsx)("span",{children:"Hide friends"})]})]}),Object(O.jsxs)("div",{className:v.a.page,children:[Object(O.jsx)("input",{type:"text",inputMode:"numeric",id:"page",value:Y,autoComplete:"off",onChange:function(e){var t=+e.target.value;t<=a&&q(t)}}),Object(O.jsxs)("label",{htmlFor:"page",children:["Page ",Object(O.jsxs)("sup",{className:v.a.maxPage,children:["max: ",a]})]})]})]})]})},U=c(262),k=c.n(U),N=c(16),F=c(18),E=c(59),D=c(14),T=function(e){var t=e.photos.large,c=e.followed,n=e.id,a=e.name,i=j.a.bind(k.a),u=Object(s.useState)(!1),d=Object(r.a)(u,2),p=d[0],f=d[1],m=Object(b.a)().isDarkMode,h=Object(o.a)((function(e){return e.users.inFollowProgress.some((function(e){return e===n}))}));return Object(O.jsxs)("li",{className:i({user:!0,userD:m}),children:[Object(O.jsx)(D.b,{className:k.a.link,to:"/profile/".concat(n)}),Object(O.jsxs)("div",{className:k.a.photo,children:[Object(O.jsx)(D.b,{to:"/profile/".concat(n),children:Object(O.jsx)("img",{src:t||(m?F.a:N.a),onLoad:function(){return f(!0)},loading:"lazy",alt:"user"})}),!p&&Object(O.jsx)("div",{className:k.a.photoPreloader,children:Object(O.jsx)(l.a,{})})]}),Object(O.jsxs)("div",{className:k.a.col,children:[Object(O.jsx)("div",{className:k.a.username,children:Object(O.jsx)("span",{children:a})}),Object(O.jsx)("div",{className:k.a.followBtn,children:Object(O.jsx)(E.a,{inFollowProcess:h,followed:c,userId:n})})]})]})},C=c(3),P=c(263),S=c.n(P),y=c(264),L=c.n(y),B=function(){var e=j.a.bind(L.a),t=Object(b.a)().isDarkMode,c=Object(s.useState)("up"),n=Object(r.a)(c,2),a=n[0],o=n[1],i=Object(s.useState)(0),l=Object(r.a)(i,2),u=l[0],d=l[1],f=Object(s.useState)(!1),m=Object(r.a)(f,2),h=m[0],g=m[1];return Object(s.useEffect)((function(){var e=document.scrollingElement,t=function(t){e.scrollTop<=500?(g(!1),d(0)):t.deltaY<0?(o("up"),g(!0)):g(!1)};return document.addEventListener("wheel",t),function(){return document.removeEventListener("wheel",t)}}),[]),Object(s.useEffect)((function(){var e=document.scrollingElement,t=0,c=0,n=function(e){t=e.changedTouches[0].screenY},r=function(n){c=n.changedTouches[0].screenY,e.scrollTop<=500&&c!==t?(g(!1),d(0)):(c<t&&g(!1),c>t&&(o("up"),g(!0)))};return document.addEventListener("touchstart",n),document.addEventListener("touchend",r),function(){document.removeEventListener("touchstart",n),document.removeEventListener("touchend",r)}}),[]),Object(O.jsx)("div",{className:e({scrollBtn:!0,visible:h,scrollBtnD:t}),onClick:function(){var e=document.scrollingElement;if(e){var t="up"===a?0:u;e.scroll({behavior:"smooth",top:t}),d(e.scrollTop),o((function(e){return"down"===e?"up":"down"}))}},children:Object(O.jsx)("button",{children:Object(O.jsx)(p,{size:"20px",type:a,color:t?"#8ea6f4":"#1c3177"})})})};t.default=function(){var e=j.a.bind(S.a),t=Object(a.a)(),c=Object(C.h)(),u=new URLSearchParams(Object(C.g)().search),d=Object(o.a)((function(e){return e.users})),p=d.totalCount,f=d.users,m=Object(b.a)().isDarkMode,h=Object(s.useState)(!1),g=Object(r.a)(h,2),_=g[0],x=g[1],v=Object(s.useState)({count:40,page:Number(u.get("page"))||1,term:u.get("term")||void 0,friend:!!u.get("friend")||void 0}),U=Object(r.a)(v,2),k=U[0],N=U[1],F=Math.ceil((p||1)/k.count),E=Object(s.useCallback)((function(){var e=k.page,t=k.friend,n=k.term,s=Object.entries({friend:t,term:n}).reduce((function(e,t){var c=Object(r.a)(t,2),n=c[0],s=c[1];return void 0!==s?"".concat(e,"&").concat(n,"=").concat(s):e}),"?page=".concat(e));c({search:s})}),[k,c]);return Object(s.useEffect)((function(){var e=document.scrollingElement,t=function(){var t=e.scrollTop,c=e.scrollHeight,r=e.clientHeight;!_&&p&&t+r>=c-500&&k.page<F&&(x(!0),N((function(e){return Object(n.a)(Object(n.a)({},e),{},{page:e.page+1})})))};return document.addEventListener("scroll",t),function(){return document.removeEventListener("scroll",t)}}),[p,_,F,k.page]),Object(s.useEffect)((function(){x(!0),t(Object(i.b)(k)).then((function(){x(!1),E()}))}),[t,k,E]),Object(s.useEffect)((function(){return function(){t(Object(i.c)())}}),[t]),Object(O.jsxs)("div",{className:S.a.users,children:[Object(O.jsxs)("div",{className:e({header:!0,headerD:m}),children:[Object(O.jsx)("div",{className:S.a.usersFound,children:Object(O.jsxs)("span",{children:["Users found: ",null===p||void 0===p?void 0:p.toLocaleString()]})}),Object(O.jsx)(w,{queryParams:k,setQueryParams:N,fetching:_,pageCount:F})]}),p?Object(O.jsxs)("ul",{className:S.a.usersList,children:[f.map((function(e){return Object(s.createElement)(T,Object(n.a)(Object(n.a)({},e),{},{key:e.id}))})),_&&Object(O.jsx)("div",{className:S.a.preloader,children:Object(O.jsx)(l.a,{})})]}):p&&f.length||_?Object(O.jsx)(l.a,{}):Object(O.jsx)("div",{className:e({notFound:!0,notFoundD:m}),children:Object(O.jsx)("div",{className:S.a.notFoundText,children:k.friend?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{children:"Friend"}),Object(O.jsxs)("span",{className:S.a.term,children:['"',k.term,'"']}),Object(O.jsxs)("span",{children:["on page ",k.page]}),Object(O.jsx)("span",{children:"not found."})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{children:"No results for"}),Object(O.jsxs)("span",{className:S.a.term,children:['"',k.term,'"']}),Object(O.jsxs)("span",{children:["on page ",k.page,"."]})]})})}),Object(O.jsx)(B,{})]})}}}]);
//# sourceMappingURL=5.a92cbe4d.chunk.js.map