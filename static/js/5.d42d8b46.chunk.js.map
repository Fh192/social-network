{"version":3,"sources":["components/Toggle/Toggle.module.css","components/Users/FilterUsers/FilterUsers.module.css","components/Users/User/User.module.css","components/Users/Users.module.css","components/ScrollBtn/ScrollBtn.module.css","svg/Arrow.tsx","svg/MagnifierIcon.tsx","components/Toggle/Toggle.tsx","components/Users/FilterUsers/FilterUsers.tsx","components/Users/User/User.tsx","assets/userPhotoDark.png","components/ScrollBtn/ScrollBtn.tsx","components/Users/Users.tsx","hooks/useQuery.ts"],"names":["module","exports","Arrow","size","type","color","styles","transition","transform","style","xmlns","xmlnsXlink","version","width","height","viewBox","xmlSpace","fill","d","MagnifierIcon","x","y","enableBackground","Toggle","checked","disabled","onChange","cx","classNames","bind","isDarkMode","useDarkMode","className","toggle","toggleD","FilterUsers","fetching","queryParams","setQueryParams","dispatch","useDispatch","ref","useRef","totalCount","useSelector","s","users","useState","arrowType","setArrowType","friend","onlyFriends","setOnlyFriends","hideFriends","setHideFriends","term","setTerm","termSubmitHandler","e","key","params","setInitialState","page","useEffect","wheelListener","deltaY","document","addEventListener","removeEventListener","undefined","useOnClickOutside","filterUsers","title","onClick","arrow","arrowD","popup","popupD","showPopup","magnifier","id","placeholder","autoComplete","value","currentTarget","onKeyDown","clearInput","CrossIcon","toggles","User","photo","photos","large","followed","userId","name","photoLoaded","setPhotoLoaded","inFollowProcess","inFollowProgress","some","user","userD","link","to","src","photoPlaceholder","onLoad","loading","alt","photoPreloader","Preloader","col","username","followBtn","FollowButton","ScrollBtn","lastPosition","setLastPosition","visible","setVisible","el","scrollingElement","scrollListener","scrollTop","touchstartY","touchendY","touchStartListener","changedTouches","screenY","touchEndListener","scrollBtn","scrollBtnD","top","scroll","behavior","t","Users","navigate","useNavigate","query","URLSearchParams","useLocation","search","setFetching","count","Number","get","setQueryParamsToUrl","useCallback","Object","entries","reduce","acc","val","listener","scrollHeight","clientHeight","length","getUsers","then","header","headerD","usersFound","toLocaleString","usersList","map","preloader","notFound"],"mappings":"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","file":"static/js/5.d42d8b46.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"toggle\":\"Toggle_toggle__Cn-wh\",\"toggleD\":\"Toggle_toggleD__1Jmtu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterUsers\":\"FilterUsers_filterUsers__2Y9vA\",\"arrowD\":\"FilterUsers_arrowD__ti3pG\",\"title\":\"FilterUsers_title__ibg5D\",\"popup\":\"FilterUsers_popup__vK8hg\",\"popupD\":\"FilterUsers_popupD__1fd-H\",\"showPopup\":\"FilterUsers_showPopup__2lqB3\",\"magnifier\":\"FilterUsers_magnifier__3iqA5\",\"clearInput\":\"FilterUsers_clearInput__v6swI\",\"term\":\"FilterUsers_term__2EUx0\",\"toggles\":\"FilterUsers_toggles__-zNm1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"User_user__38FXz\",\"userD\":\"User_userD__3jNih\",\"link\":\"User_link__1YDXP\",\"followBtn\":\"User_followBtn__2PlbX\",\"photo\":\"User_photo__4Rk8a\",\"photoPreloader\":\"User_photoPreloader__35SVO\",\"col\":\"User_col__1cFGU\",\"username\":\"User_username__2XOY2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"users\":\"Users_users__3jhox\",\"header\":\"Users_header__3yG7n\",\"headerD\":\"Users_headerD__1n0GV\",\"usersList\":\"Users_usersList__3sOPG\",\"preloader\":\"Users_preloader__2hxbA\",\"notFound\":\"Users_notFound__3r61_\",\"term\":\"Users_term__21juF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scrollBtn\":\"ScrollBtn_scrollBtn__3d0oL\",\"scrollBtnD\":\"ScrollBtn_scrollBtnD__2MZjE\",\"visible\":\"ScrollBtn_visible__17p76\"};","import React from 'react';\r\n\r\nexport type ArrowType = 'up' | 'down';\r\n\r\nconst Arrow: React.FC<{ size: string; type: ArrowType; color?: string }> = ({\r\n  size,\r\n  type,\r\n  color = '#0d1117',\r\n}) => {\r\n  let styles = { transition: 'all 0.2s ease', transform: 'rotateX(0deg)' };\r\n\r\n  if (type === 'up') {\r\n    styles = { ...styles, transform: 'rotateX(180deg)' };\r\n  }\r\n\r\n  return (\r\n    <svg\r\n      style={styles}\r\n      xmlns='http://www.w3.org/2000/svg'\r\n      xmlnsXlink='http://www.w3.org/1999/xlink'\r\n      version='1.1'\r\n      width={size}\r\n      height={size}\r\n      viewBox='0 0 451.847 451.847'\r\n      xmlSpace='preserve'\r\n    >\r\n      <g>\r\n        <path\r\n          fill={color}\r\n          d='M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751   c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0   c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z'\r\n        />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Arrow;\r\n","import React from 'react';\r\n\r\nconst MagnifierIcon: React.FC<{ size: string }> = ({ size }) => {\r\n  return (\r\n    <svg\r\n      xmlns='http://www.w3.org/2000/svg'\r\n      xmlnsXlink='http://www.w3.org/1999/xlink'\r\n      x='0px'\r\n      y='0px'\r\n      width={size}\r\n      height={size}\r\n      viewBox='0 0 30.239 30.239'\r\n      enableBackground='new 0 0 30.239 30.239'\r\n      xmlSpace='preserve'\r\n    >\r\n      <g>\r\n        <path d='M20.194,3.46c-4.613-4.613-12.121-4.613-16.734,0c-4.612,4.614-4.612,12.121,0,16.735   c4.108,4.107,10.506,4.547,15.116,1.34c0.097,0.459,0.319,0.897,0.676,1.254l6.718,6.718c0.979,0.977,2.561,0.977,3.535,0   c0.978-0.978,0.978-2.56,0-3.535l-6.718-6.72c-0.355-0.354-0.794-0.577-1.253-0.674C24.743,13.967,24.303,7.57,20.194,3.46z    M18.073,18.074c-3.444,3.444-9.049,3.444-12.492,0c-3.442-3.444-3.442-9.048,0-12.492c3.443-3.443,9.048-3.443,12.492,0   C21.517,9.026,21.517,14.63,18.073,18.074z' />\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default MagnifierIcon;\r\n","import classNames from 'classnames/bind';\r\nimport React from 'react';\r\nimport { useDarkMode } from 'usehooks-ts';\r\nimport styles from './Toggle.module.css';\r\n\r\ninterface Props {\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  checked: boolean;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const Toggle: React.FC<Props> = ({ checked, disabled, onChange }) => {\r\n  const cx = classNames.bind(styles);\r\n  const { isDarkMode } = useDarkMode();\r\n\r\n  return (\r\n    <input\r\n      className={cx({ toggle: true, toggleD: isDarkMode })}\r\n      type='checkbox'\r\n      checked={checked}\r\n      disabled={disabled}\r\n      onChange={onChange}\r\n    />\r\n  );\r\n};\r\n","import classNames from 'classnames/bind';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useDarkMode, useOnClickOutside } from 'usehooks-ts';\r\nimport { useSelector } from '../../../hooks/useSelector';\r\nimport { setInitialState } from '../../../store/reducers/usersSlice';\r\nimport Arrow from '../../../svg/Arrow';\r\nimport { CrossIcon } from '../../../svg/CrossIcon';\r\nimport MagnifierIcon from '../../../svg/MagnifierIcon';\r\nimport { IQueryParams } from '../../../types/users';\r\nimport { Toggle } from '../../Toggle/Toggle';\r\nimport styles from './FilterUsers.module.css';\r\n\r\ninterface Props {\r\n  fetching: boolean;\r\n  queryParams: IQueryParams;\r\n  setQueryParams: React.Dispatch<React.SetStateAction<IQueryParams>>;\r\n}\r\n\r\nexport const FilterUsers: React.FC<Props> = ({\r\n  fetching,\r\n  queryParams,\r\n  setQueryParams,\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const cx = classNames.bind(styles);\r\n  const ref = useRef<HTMLDivElement>(null);\r\n  const { isDarkMode } = useDarkMode();\r\n  const { totalCount } = useSelector(s => s.users);\r\n  const [arrowType, setArrowType] = useState<'down' | 'up'>('down');\r\n  const [onlyFriends, setOnlyFriends] = useState(queryParams.friend === true);\r\n  const [hideFriends, setHideFriends] = useState(queryParams.friend === false);\r\n  const [term, setTerm] = useState(queryParams.term || '');\r\n\r\n  const toggleArrowType = () => {\r\n    setArrowType(type => (type === 'down' ? 'up' : 'down'));\r\n  };\r\n\r\n  const termSubmitHandler = (e?: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (!e || e.key === 'Enter') {\r\n      setQueryParams(params => {\r\n        if (!!term && term !== params.term) {\r\n          dispatch(setInitialState());\r\n          return { ...params, term, page: 1 };\r\n        }\r\n        return params;\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggleHideFriends = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (onlyFriends) setOnlyFriends(false);\r\n    setHideFriends(e.currentTarget.checked);\r\n  };\r\n\r\n  const toggleOnlyFriends = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (hideFriends) setHideFriends(false);\r\n    setOnlyFriends(e.currentTarget.checked);\r\n  };\r\n\r\n  const clearTerm = () => {\r\n    setTerm('');\r\n    if (!totalCount) {\r\n      dispatch(setInitialState());\r\n      setQueryParams(params => {\r\n        return { ...params, term: undefined };\r\n      });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const wheelListener = (e: WheelEvent) => {\r\n      if (e.deltaY > 0) setArrowType('down');\r\n    };\r\n\r\n    document.addEventListener('wheel', wheelListener);\r\n    return () => document.removeEventListener('wheel', wheelListener);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const friend = onlyFriends ? true : hideFriends ? false : undefined;\r\n\r\n    setQueryParams(params => {\r\n      if (friend !== params.friend) {\r\n        dispatch(setInitialState());\r\n        return { ...params, friend, term: term || undefined, page: 1 };\r\n      }\r\n      return params;\r\n    });\r\n  }, [onlyFriends, hideFriends, term, dispatch, setQueryParams]);\r\n\r\n  useOnClickOutside(ref, () => {\r\n    setArrowType('down');\r\n  });\r\n\r\n  return (\r\n    <div className={styles.filterUsers} ref={ref}>\r\n      <div className={styles.title} onClick={toggleArrowType}>\r\n        <span>Parameters</span>\r\n        <div className={cx({ arrow: true, arrowD: isDarkMode })}>\r\n          <Arrow size='10px' type={arrowType} color='#8ea6f4' />\r\n        </div>\r\n      </div>\r\n      <div\r\n        className={cx({\r\n          popup: true,\r\n          popupD: isDarkMode,\r\n          showPopup: arrowType === 'up',\r\n        })}\r\n      >\r\n        <div className={styles.term}>\r\n          <div className={styles.magnifier} onClick={() => termSubmitHandler()}>\r\n            <MagnifierIcon size='15px' />\r\n          </div>\r\n          <input\r\n            type='text'\r\n            id='term'\r\n            placeholder='Search'\r\n            autoComplete='off'\r\n            value={term}\r\n            disabled={fetching}\r\n            onChange={e => setTerm(e.currentTarget.value)}\r\n            onKeyDown={termSubmitHandler}\r\n          />\r\n          <div className={styles.clearInput} onClick={clearTerm}>\r\n            <CrossIcon size='15px' />\r\n          </div>\r\n        </div>\r\n        <div className={styles.toggles}>\r\n          <label>\r\n            <Toggle\r\n              onChange={toggleOnlyFriends}\r\n              checked={onlyFriends}\r\n              disabled={fetching}\r\n            />\r\n            <span>Only friends</span>\r\n          </label>\r\n          <label>\r\n            <Toggle\r\n              onChange={toggleHideFriends}\r\n              checked={hideFriends}\r\n              disabled={fetching}\r\n            />\r\n            <span>Hide friends</span>\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { IUser } from '../../../types/users';\r\nimport styles from './User.module.css';\r\nimport photoPlaceholder from '../../../assets/userPhoto.png';\r\nimport photoPlaceholderD from '../../../assets/userPhotoDark.png';\r\nimport Preloader from '../../Preloader/Preloader';\r\nimport FollowButton from '../../FollowButton/FollowButton';\r\nimport { useSelector } from '../../../hooks/useSelector';\r\nimport { Link } from 'react-router-dom';\r\nimport classNames from 'classnames/bind';\r\nimport { useDarkMode } from 'usehooks-ts';\r\n\r\nexport const User: React.FC<IUser> = ({\r\n  photos: { large: photo },\r\n  followed,\r\n  id: userId,\r\n  name,\r\n}) => {\r\n  const cx = classNames.bind(styles);\r\n  const [photoLoaded, setPhotoLoaded] = useState(false);\r\n  const { isDarkMode } = useDarkMode();\r\n  const inFollowProcess = useSelector(s =>\r\n    s.users.inFollowProgress.some(id => id === userId)\r\n  );\r\n\r\n  return (\r\n    <li className={cx({ user: true, userD: isDarkMode })}>\r\n      <Link className={styles.link} to={`/profile/${userId}`} />\r\n      <div className={styles.photo}>\r\n        <Link to={`/profile/${userId}`}>\r\n          <img\r\n            src={photo || (isDarkMode ? photoPlaceholderD : photoPlaceholder)}\r\n            onLoad={() => setPhotoLoaded(true)}\r\n            loading='lazy'\r\n            alt='user'\r\n          />\r\n        </Link>\r\n        {!photoLoaded && (\r\n          <div className={styles.photoPreloader}>\r\n            <Preloader />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className={styles.col}>\r\n        <div className={styles.username}>\r\n          <span>{name}</span>\r\n        </div>\r\n        <div className={styles.followBtn}>\r\n          <FollowButton\r\n            inFollowProcess={inFollowProcess}\r\n            followed={followed}\r\n            userId={userId}\r\n          />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc4AAAHOCAMAAAAmOBmCAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAHJQTFRFJCczgJGejbnYd63UYKHQmb/bVJvOMonIa6fSSZXMgrPWPY/KZafWmMTjmcTk////f7XdTJjPcq7ZzOLx8vj8stPqWZ/SpcvnP5DL2On1psznzOHxjL3g8/j8v9rus9Pr5fD4i7zgfrXc5vH42en1ZabWsEZQsQAAEKJJREFUeJztne1C4jwQhRdEUWAREF0UEXf1vf9bfG1KS5KmpTQfk2TO82sXtW3mMJPJ5KO/fgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFJkNB7fTFRuxuNb6scC1zEaT+6m3dxNIGsCjO8fLggp8zAZUz8waGF0c8klWzS9GVE/OtCYXeOUJkmpGwAqRvdWUlZM0JnSczsswpq5g6KUOPJLmQk6UiJu5s7FLJijHw3PaOJFy5I7uGhQxnaJ7GXmGJAGY+Ynymog5gbhJoSWEDQM4cSEoN4ZBwmzEDQIt8HFnCIp8obvbLaNB+qG54j7AlB/JtSNzw2SOCuBiOsSl3X2YSDiOmNMraVgRm2GTKB3zRI4qAOoe00Z9KC2UCa0TZDi2kE11mxjTm2QlBlRq2cAAXcoYcvtfbmnNkuixJLR6txRGyZJYus2z6ADvZ6IxidNsJboOmJMgmSwIPcabqnlugimtfsTZ0qrAj37koKa0LMvaaiJil8/UlETA9A+pKMmCkSXSUlN9J+XSEtN6NlN7NWDJtCznfTURL2vA2ppBgE9W4i66t4K5lfMxDq/eQnoacLn7ni/oJzQZEYtigVIb3VSTGrPYPpTI800qIbafJGRahpUgXRIJuWOswTVeAlqMRyA7rMm8Y5TgHBbke6IUwajz5L4l+31A7tXBDmEWgG1IaMgrh2cNiDc/soiq61AdptPqJ0iu82hgCDDvphALYBjqM1JTB5DzjPMD6uhNr9zWK8cineH9VA4Z0Npz1mbYVwbys85ObtnHEcnuoate+ZUQTjD1T3zdE627pljz1nA0z1zTGtLWLpnrs7J1D2pje4RhqWh3Kq1Mgwrt9Qm9wq1cYOT2iEI18Fu3jPPEkINtXkDk+8opYTZWCX1LUaXYJYMUZvbO9QGDkpeC75MsNqQnW9FqIJVZYja2AGgNnFA8o+1rKJt/rGWVbSlNnUQqI0cjFyXIaiwiba51xBK2FQSqA0dCGozByL3em0Fk92eec+NnWHyYg4OwxQBtaHDQG3lYFAbOghcuk4mk55cuk4mnSePUWcBizoftZEDQm3qEFDbOCAMlk/ncgJfHxjkQtSZ0OL3D4HuxSAXot7MsHz8IdC9GORCxnavjC6zLj5dXGtD8VcSm7Xy45ByMsiFjM1+Kmy81D9dGD+9hPgrhe2zpCjkdIqx2ULOxxftU1dy/vBnV/04qJzZT6qYVyKUcr5qnzqU8/G10nO4nG/7/f7tuj/JPrXtklOXzkLO98WJ1fLpoOg5XM7iIZ+u+5Psd5KZE9uTnI9q1mIhp5xA7T7EtY/l/4LKmf1IpVvOvfKpIzl/Emepaw4qZ/YjFfO+zkrOx3f5U2dyToV/lv1eUDmzT23bLSW6uK0cbt3JuSs++xT/hJwu6bDUmx5uDXLu/j7vP1/3z/920zZMcpbuL/5Vy7n5udL+2VCmMNxDlDk+i6+EXtlY/d7/XGb/d924jIDa3L4xt1rIufvSwm1DzvXzth55/G4T1Cjnse48T3Ku6it9qBdaP9e32Nb3qDsDNQHf/f2sP9wbBaU2t2865CyF2J6tq8u52cpG3epVhy45l/WHpZxH+UKyEOZ7mOXcvSofrwwPk/sUWZecpZE/2uRcncz2dejU0yinyIXWtZzPig7nO7bdwyjny0n5w9fp8+fmw2ReR2iZ7TzJuRNG3JjlLKs9T0VF/WX11XCrbjm/hU/Wcv5w/PmV3aIcki6Uv3382OyKe5S52TlYaKnQTgTaw+pH8N3mo8U/M5ezZbdRZamNYkFFztJ6x+p/Qp9980pmOdfFZ9+SnIfKs5eye3bfQ5NTZG7fa/l/zXjBW84yKFbWVeR8UyNvWeoxdVcmOUWwlMadh7PdCz//lO9xzsV2T0qwUOUUt/k+++67/E2AnKWllHCryFn84CAloes292zKuRNd5WF9llNKn+VxqLiHfqn6HqqcR/02Iv7r4T/zXYGX5CzD7eeuIedGdc7KnobeU5dz/a9MWZZN+QpW58s07/Ek30OVs5D+S/7dVeOvp9kXbS/KKdfjZDmFeMoIcd0SbcVfve5P1GOJKg7qckrqH7UAcPphdQ9Fzk3z7l+PzaoReznXh9q+spyGCpuxs2qb7zy2zXdKcn5330N5BHEZNfMpvohbyKlZ6r0Ot7Kcj01Tm7yhRc7vOp/pktNwj4P0kSLnm3YZw5UhZ/0fEW51Od86/qhdzsPTUvaiC3JqnZ98j+ZDqr/7fr4S5Dxbqg63kpxrg6lNwW3aUkY40y7nS4ucn9K/FTm175LpxpDz9DV/bXqnwdRf0waD5dy13OPb9JAGOVeQ02yc0zrNC8HWkLmo+hi5LtjK/XNDTi00iCtr8zzMywglIrQ+vlxIhYqPPqYN7OTsm9kaUqGjIRWCnLXNX/WBirZw0+BMmj4mOuRsBlAl/io/NuQ9YkmFdrfM5eyeIDsjqt/y2nihglIDEl3VZtpguJxv5ntU11Iespk3rWVProCcZ2s9SiZbNIz1ZXAGTR8THXJujPeos61mkW8r95RL09cLckrGkT1Ar3CvTM6g6WOiQ07zPeoETH3Ipeaeu63p60Vtbt+YbWxI+781OYVp660J5VKAg2n+2kLO7nuoDynmfrb1fcoJO2VdaQG1uX1jtnHboFx2ANGTfp4KPOWSnob1dH0MdMmp3mOl3UMr05brUE5V+LUo9TeHTdTm9o3ZxqZ63ZsmZzkVut3//m/zZ/9otl5DnyadcnbeQ+i3/fP390nhcvnY659///3+EMobggW1uX1jPobGJGe5TlPqnl6q+HviaF6aaSPn9OWr4x7Vz6onPaq/+2VYikZtbt+071Fp+NpCk7PaO3SibW+elZzaPdRh7UaTc7o8SL/7ZPh23VGb2zfmky7MkyNvDYsuKmMfli3Lzm3lVO6hC7T40gLw+lh57NF4x8xLtg4ODl9slu+LlhXTrmi/x8vq5yeKyi+L5XLR9u2ZUZvbN3wOWCzIvYrA6tCv/DMhyJkZbM6aLqA2tn+oT/0KSfbjFC7vxCnJfA28gNrGAck/sWUlJ7WpQ5D5O+llqE0dAj65EINMiFMuxCETYtR55n7ORQm1lYNBbegwcOk8mbzAk0vnyaPrZBNtqc0cCiYjT2ozh4L6VSphyH5hSQWPFQnZH+tfQ23pIFAbORz31KYOAIsKXwmHaMsn1rKIttQmDkn+0ZZRrOUQbTnFWgaVBGoDhyX3SkL2b6vSoLa3Z6jNGxrzPs9cYDI3dibvZIjDikyVrJMhauOGJ+dJbC4T1zLUNvcItWkpyHeswmamU4Ha6t6gNiwNuRZueTpntu5JbVYq8lxwy9U5M3VPaqPSkWNyy9c5s3RPapNSMqM2vnO4zYypZFe5pTYoLS0vT06W7A/hu0Bep0bNqc1JDrUCTuGx37qLnEp9nAcpFRllQ9SmjIF8lpnwW1JiIpfSLauF7x1kEm6pzRgLeYRbhNqKHLJbZLVn0i8moIAgQ62GNdQGjIvUV91yXFnbRdqjFYxRdFLuPtFxNkl49EltuhhJd/TJa+N8X1JNh5AGmUlzYR/qB22kuCUbSW076emJpLaL1NJbqNlNWnpCzUukpCfUvExCelKbKgmS0RPLMHuRhp6ItH1JQU+o2Z/4p1eg5jXEXk9gd+ieJXFPZ6Oydy0x1+N578kdRrxbPzEjNohIE1wMNwcSY0KElHY48S2Px2S1DbF1oNiIYklMFQUEWnviGbFgfOKEODLcOdZfOiKGjAg5kEOoe9A5BptOoT29D3Ug59AV5VFw98GIJuIiBfLFmCDHReHAI6G7UHSanglZVYCYAQglKMQMRIA+dA4xA+I5y31AAhQaf5U/1PNIuPXhonBMQmZue1H0mOTcuPJRaBkJY/s1YnfcX5kRFyMLJ324wfRXjMyun3W5m0HKmBmNJ/38dD6BkskwHk9aZJ1PJjMMRgAAAAAAgHtmOGcgG0aiPJdDge12+pBDM2yo50PSn2EsZ185b0qS1/ykvtWurlg8MK006eXVlAs1yqbiecotGYihVp7u1gG9MdwENU98pLp7wLAggpOg7bNYKWYSLat+U/1uXkvnouf0MqL2yTgOw+mLC57TctDuBfnpD78u0GNiOaUodXEZYdaFhZ6bS1L5UvdZyZJe79Gb/ktiU/hS931jWipfziu5ag9C/CdL9F83mFLv0ZtrV6vHXVS4bsVgdg46ZHtQvEa4eoNpZj3owBXNcW4yGPSa0TibMgiL16zGlxMN3SmcTVHB6jygyIqfNtu+88iIbHfsRbSvy3IPfzwNGYyT95PHYYcb662kcWfrPXB1yAh9luukJYlnuA6P0SNdtDFy9o6B6MsjHbh90QJZJ+p0w34cHccQ3B/+cxf+yz1yfVBnWjOANU6SoCZhv9326U+TJBMiT2pOAwbdmaejqBKsKFhUgvoYxL+ivrQsSC7B9X8K4tzn8RQ+Yqzy8P4e3QeBzrS881EBvA1xSHlSeoY8cvbepaS398GOs05nABr8tUQTFxMv48CvDkhFT5qXTM0n48EG6nt0jVvS0JP0lWF3k/E181Cj8T3hK0JT0DOKF8CJo4PaO9Xb4tAh+hebJZAPRaFmKkSvp9/qQXZErqe/yl6mRK0n1LyamOvx9NlFesSrJ9QcQqzz2YQjuKSJU0+oOZQYywkYcA6HWrsmt5cfGrQR33CF2iJpE1t6i6TWjriW9yENsiWm/UhIg+yh1vAMansOiCcdQsfpAvpdVSXoON0Qx8ZkdJyuoFZSQG2EfIih+0TH6Q760WfgxamZQz36RKnWKdThlrr9uUFbvMUYxTWUoxUsw3QPoZzUTc8RunCLUOsDqnCLrNYPRHKigOAHmlo8Cgi+ICkmUDc6XyiKCRT7lbkQfiH1jLrJWRNcTuoG503owSfyIL8Ezoaom5s7YbMh5EG+CZkNofTun4Byoh7kn3C1IazdC0EwOakbyoNQhxgPeT0cuJ5Am7Kpm8mFMIMVVBBCEWQim7qRfAjhnnDOcARwT+omcsK/e8I5Q+LdPakbyAvf7gnnDItn96RuHjf8uiecMzRe3ZO6cfzw6Z5wzvB4dE/qpnHEn3tinpMCbxMr1A3jia95T6wQosGTnFghRIOfVUM4SJEKL3JibS0VXtbcUjeKMR7UxIIvOjyUEqibxBn3YxWMUihxLicSIUqcH6VJ3SDmOFYTiRAtjpMh6uZwx20yhAO+qHEqJxIhapwmQ9SNAS7dE/PW9Dg8ywRTY/Q4PGqIuilg6jDaYtAZAzNXclI3BBS4GnpiGUIcOJITsTYOHEVb6maAEjfRFrE2FpzIiVgbC06iLXUjQIWTaEvdCFDjQE3Ua+PBwSQ26rXx4KBuS90EIGGtJhZkxoT1Xk+8BTAmrNckUDcAyNjurEdJKC4s5cQwJS4sC0NYwhcXlkMV6scHGlZqYrl0bFjJidmU2LDqPFHhiw2rzpP64UEDCzUx6owPCzkx6owPi84To874sDgDjPrRgQHImRWD1cRcZ4wM3hmIIkKMDD6hD5lQjAwuJFA/ODACObNioJrIhOJkYC6EmlCcDKwL4SU4cTKwLkT92MDMwOV81I8NWoCcWTFITawTipVBWxswTomVQfsCUbGNlUE7VTBOiZWukcr/yuZe1aLlzTwAAAAASUVORK5CYII=\"","import React, { useEffect, useState } from 'react';\r\nimport classNames from 'classnames/bind';\r\nimport { useDarkMode } from 'usehooks-ts';\r\nimport Arrow from '../../svg/Arrow';\r\nimport styles from './ScrollBtn.module.css';\r\n\r\nexport const ScrollBtn: React.FC = () => {\r\n  const cx = classNames.bind(styles);\r\n\r\n  const { isDarkMode } = useDarkMode();\r\n  const [arrowType, setArrowType] = useState<'up' | 'down'>('up');\r\n  const [lastPosition, setLastPosition] = useState(0);\r\n  const [visible, setVisible] = useState(false);\r\n\r\n  const scroll = () => {\r\n    const el = document.scrollingElement;\r\n    if (el) {\r\n      const top = arrowType === 'up' ? 0 : lastPosition;\r\n      el.scroll({ behavior: 'smooth', top });\r\n      setLastPosition(el.scrollTop);\r\n      setArrowType(t => (t === 'down' ? 'up' : 'down'));\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const el = document.scrollingElement as Element;\r\n\r\n    const scrollListener = (e: WheelEvent) => {\r\n      if (el.scrollTop <= 500) {\r\n        setVisible(false);\r\n        setLastPosition(0);\r\n      } else {\r\n        if (e.deltaY < 0) {\r\n          setArrowType('up');\r\n          setVisible(true);\r\n        } else setVisible(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('wheel', scrollListener);\r\n    return () => document.removeEventListener('wheel', scrollListener);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const el = document.scrollingElement as Element;\r\n    let touchstartY = 0;\r\n    let touchendY = 0;\r\n\r\n    const handleScroll = () => {\r\n      if (el.scrollTop <= 500 && touchendY !== touchstartY) {\r\n        setVisible(false);\r\n        setLastPosition(0);\r\n      } else {\r\n        if (touchendY < touchstartY) {\r\n          setVisible(false);\r\n        }\r\n        if (touchendY > touchstartY) {\r\n          setArrowType('up');\r\n          setVisible(true);\r\n        }\r\n      }\r\n    };\r\n    const touchStartListener = (e: TouchEvent) => {\r\n      touchstartY = e.changedTouches[0].screenY;\r\n    };\r\n    const touchEndListener = (e: TouchEvent) => {\r\n      touchendY = e.changedTouches[0].screenY;\r\n      handleScroll();\r\n    };\r\n\r\n    document.addEventListener('touchstart', touchStartListener);\r\n    document.addEventListener('touchend', touchEndListener);\r\n    return () => {\r\n      document.removeEventListener('touchstart', touchStartListener);\r\n      document.removeEventListener('touchend', touchEndListener);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      className={cx({ scrollBtn: true, visible, scrollBtnD: isDarkMode })}\r\n      onClick={scroll}\r\n    >\r\n      <button>\r\n        <Arrow\r\n          size='20px'\r\n          type={arrowType}\r\n          color={isDarkMode ? '#8ea6f4' : '#1c3177'}\r\n        />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useState } from 'react';\r\nimport { useDispatch } from '../../hooks/useDispatch';\r\nimport { useSelector } from '../../hooks/useSelector';\r\nimport { getUsers, setInitialState } from '../../store/reducers/usersSlice';\r\nimport { IQueryParams } from '../../types/users';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport { FilterUsers } from './FilterUsers/FilterUsers';\r\nimport { User } from './User/User';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport styles from './Users.module.css';\r\nimport { useQuery } from '../../hooks/useQuery';\r\nimport { useDarkMode } from 'usehooks-ts';\r\nimport { ScrollBtn } from '../ScrollBtn/ScrollBtn';\r\n\r\nconst Users: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  let query = useQuery();\r\n\r\n  const { totalCount, users } = useSelector(s => s.users);\r\n  const { isDarkMode } = useDarkMode();\r\n\r\n  const [fetching, setFetching] = useState(false);\r\n  const [queryParams, setQueryParams] = useState<IQueryParams>({\r\n    count: 40,\r\n    page: Number(query.get('page')) || 1,\r\n    term: query.get('term') || undefined,\r\n    friend: !!query.get('friend') || undefined,\r\n  });\r\n\r\n  const setQueryParamsToUrl = useCallback(() => {\r\n    const { page, friend, term } = queryParams;\r\n\r\n    const search = Object.entries({ friend, term }).reduce(\r\n      (acc, [key, val]) => {\r\n        if (val !== undefined) {\r\n          return `${acc}&${key}=${val}`;\r\n        }\r\n        return acc;\r\n      },\r\n      `?page=${page}`\r\n    );\r\n    navigate({ search });\r\n  }, [queryParams, navigate]);\r\n\r\n  useEffect(() => {\r\n    const el = document.scrollingElement as Element;\r\n\r\n    const listener = () => {\r\n      const { scrollTop, scrollHeight, clientHeight } = el;\r\n\r\n      if (!fetching && totalCount) {\r\n        if (scrollTop + clientHeight >= scrollHeight - 500) {\r\n          if (users.length < totalCount) {\r\n            setFetching(true);\r\n            setQueryParams(params => {\r\n              return { ...params, page: params.page + 1 };\r\n            });\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('scroll', listener);\r\n    return () => document.removeEventListener('scroll', listener);\r\n  }, [totalCount, users, fetching]);\r\n\r\n  useEffect(() => {\r\n    setFetching(true);\r\n    dispatch(getUsers(queryParams)).then(() => {\r\n      setFetching(false);\r\n      setQueryParamsToUrl();\r\n    });\r\n  }, [dispatch, queryParams, setQueryParamsToUrl]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      dispatch(setInitialState());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <div className={styles.users}>\r\n      <div className={`${styles.header} ${isDarkMode && styles.headerD}`}>\r\n        <div className={styles.usersFound}>\r\n          <span>Users found: {totalCount?.toLocaleString()}</span>\r\n        </div>\r\n        <FilterUsers\r\n          queryParams={queryParams}\r\n          setQueryParams={setQueryParams}\r\n          fetching={fetching}\r\n        />\r\n      </div>\r\n      {totalCount ? (\r\n        <ul className={styles.usersList}>\r\n          {users.map(user => (\r\n            <User {...user} key={user.id} />\r\n          ))}\r\n          {fetching && (\r\n            <div className={styles.preloader}>\r\n              <Preloader />\r\n            </div>\r\n          )}\r\n        </ul>\r\n      ) : totalCount === 0 ? (\r\n        <div className={styles.notFound}>\r\n          <span>No results for</span>\r\n          <span className={styles.term}>\"{queryParams.term}\"</span>\r\n        </div>\r\n      ) : (\r\n        <Preloader />\r\n      )}\r\n      <ScrollBtn />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import { useLocation } from 'react-router';\r\n\r\nexport const useQuery = () => {\r\n  return new URLSearchParams(useLocation().search);\r\n};\r\n"],"sourceRoot":""}