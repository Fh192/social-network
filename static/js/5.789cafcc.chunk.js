(this["webpackJsonpsocial-network"]=this["webpackJsonpsocial-network"]||[]).push([[5],{264:function(e,t,c){e.exports={scrollBtn:"ScrollBtn_scrollBtn__3d0oL",scrollBtnD:"ScrollBtn_scrollBtnD__2MZjE",visible:"ScrollBtn_visible__17p76"}},265:function(e,t,c){e.exports={toggle:"Toggle_toggle__Cn-wh",toggleD:"Toggle_toggleD__1Jmtu"}},266:function(e,t,c){e.exports={filterUsers:"FilterUsers_filterUsers__2Y9vA",arrowD:"FilterUsers_arrowD__ti3pG",title:"FilterUsers_title__ibg5D",popup:"FilterUsers_popup__vK8hg",popupD:"FilterUsers_popupD__1fd-H",showPopup:"FilterUsers_showPopup__2lqB3",magnifier:"FilterUsers_magnifier__3iqA5",clearTerm:"FilterUsers_clearTerm__1acry",clearTermVisible:"FilterUsers_clearTermVisible__1q3Ce",term:"FilterUsers_term__2EUx0",toggles:"FilterUsers_toggles__-zNm1",page:"FilterUsers_page__3kMlJ",pageD:"FilterUsers_pageD__k70Xf",maxPage:"FilterUsers_maxPage__34xRO"}},267:function(e,t,c){e.exports={user:"User_user__38FXz",userD:"User_userD__3jNih",link:"User_link__1YDXP",followBtn:"User_followBtn__2PlbX",photo:"User_photo__4Rk8a",photoPreloader:"User_photoPreloader__35SVO",col:"User_col__1cFGU",username:"User_username__2XOY2"}},268:function(e,t,c){e.exports={users:"Users_users__3jhox",header:"Users_header__3yG7n",headerD:"Users_headerD__1n0GV",usersList:"Users_usersList__3sOPG",scrollBtn:"Users_scrollBtn__1zp-Y",preloader:"Users_preloader__2hxbA",notFound:"Users_notFound__3r61_",notFoundD:"Users_notFoundD__1qkZZ",text:"Users_text__3g89f",term:"Users_term__21juF"}},273:function(e,t,c){"use strict";c.r(t);var n=c(12),r=c(3),s=c(8),a=c.n(s),o=c(1),i=c(4),l=c(5),u=c(17),j=c(9),d=c(39),b=c(16),O=c(0),f=function(e){var t=e.size,c=e.type,r=e.color,s=void 0===r?"#0d1117":r,a={transition:"all 0.2s ease",transform:"rotateX(0deg)"};return"up"===c&&(a=Object(n.a)(Object(n.a)({},a),{},{transform:"rotateX(180deg)"})),Object(O.jsx)("svg",{style:a,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",width:t,height:t,viewBox:"0 0 451.847 451.847",xmlSpace:"preserve",children:Object(O.jsx)("g",{children:Object(O.jsx)("path",{fill:s,d:"M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751   c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0   c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"})})})},p=c(264),m=c.n(p),h=function(){var e=a.a.bind(m.a),t=Object(l.a)().isDarkMode,c=Object(o.useState)("up"),n=Object(r.a)(c,2),s=n[0],i=n[1],u=Object(o.useState)(0),j=Object(r.a)(u,2),d=j[0],b=j[1],p=Object(o.useState)(!1),h=Object(r.a)(p,2),_=h[0],g=h[1];return Object(o.useEffect)((function(){var e=document.scrollingElement,t=function(t){e.scrollTop<=500?(g(!1),b(0)):t.deltaY<0?(i("up"),g(!0)):g(!1)};return document.addEventListener("wheel",t),function(){return document.removeEventListener("wheel",t)}}),[]),Object(o.useEffect)((function(){var e=document.scrollingElement,t=0,c=0,n=function(e){t=e.changedTouches[0].screenY},r=function(n){c=n.changedTouches[0].screenY,e.scrollTop<=500&&c!==t?(g(!1),b(0)):(c<t&&g(!1),c>t&&(i("up"),g(!0)))};return document.addEventListener("touchstart",n),document.addEventListener("touchend",r),function(){document.removeEventListener("touchstart",n),document.removeEventListener("touchend",r)}}),[]),Object(O.jsx)("div",{className:e({scrollBtn:!0,visible:_,scrollBtnD:t}),onClick:function(){var e=document.scrollingElement;if(e){var t="up"===s?0:d;e.scroll({behavior:"smooth",top:t}),b(e.scrollTop),i((function(e){return"down"===e?"up":"down"}))}},children:Object(O.jsx)("button",{children:Object(O.jsx)(f,{size:"20px",type:s,color:t?"#8ea6f4":"#1c3177"})})})},_=c(33),g=c(22),x=function(e){var t=e.size;return Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0",y:"0",width:t,height:t,viewBox:"0 0 30.239 30.239",enableBackground:"new 0 0 30.239 30.239",xmlSpace:"preserve",children:Object(O.jsx)("g",{children:Object(O.jsx)("path",{d:"M20.194,3.46c-4.613-4.613-12.121-4.613-16.734,0c-4.612,4.614-4.612,12.121,0,16.735   c4.108,4.107,10.506,4.547,15.116,1.34c0.097,0.459,0.319,0.897,0.676,1.254l6.718,6.718c0.979,0.977,2.561,0.977,3.535,0   c0.978-0.978,0.978-2.56,0-3.535l-6.718-6.72c-0.355-0.354-0.794-0.577-1.253-0.674C24.743,13.967,24.303,7.57,20.194,3.46z    M18.073,18.074c-3.444,3.444-9.049,3.444-12.492,0c-3.442-3.444-3.442-9.048,0-12.492c3.443-3.443,9.048-3.443,12.492,0   C21.517,9.026,21.517,14.63,18.073,18.074z"})})})},v=c(265),w=c.n(v),U=function(e){var t=e.checked,c=e.disabled,n=e.onChange,r=a.a.bind(w.a),s=Object(l.a)().isDarkMode;return Object(O.jsx)("input",{className:r({toggle:!0,toggleD:s}),type:"checkbox",checked:t,disabled:c,onChange:n})},k=c(266),N=c.n(k),D=function(e){var t,c=e.fetching,s=e.queryParams,i=e.pageCount,u=e.setQueryParams,j=Object(_.b)(),b=a.a.bind(N.a),p=Object(o.useRef)(null),m=Object(l.a)().isDarkMode,h=Object(o.useState)("down"),v=Object(r.a)(h,2),w=v[0],k=v[1],D=Object(o.useState)(!0===s.friend),F=Object(r.a)(D,2),E=F[0],C=F[1],T=Object(o.useState)(!1===s.friend),P=Object(r.a)(T,2),y=P[0],S=P[1],B=Object(o.useState)(null!==(t=s.term)&&void 0!==t?t:""),L=Object(r.a)(B,2),z=L[0],M=L[1],X=Object(o.useState)(s.page),Y=Object(r.a)(X,2),q=Y[0],R=Y[1],G=Object(o.useCallback)((function(){u((function(e){return z.trim()&&z.trim()!==e.term?(j(Object(d.c)()),Object(n.a)(Object(n.a)({},e),{},{term:z,page:1})):e}))}),[z,u,j]),V=function(e){e&&"Enter"!==e.key||G()};return Object(o.useEffect)((function(){var e=function(e){e.deltaY>0&&k("down")};return document.addEventListener("wheel",e),function(){return document.removeEventListener("wheel",e)}}),[]),Object(o.useEffect)((function(){var e=!!E||!y&&void 0;u((function(t){return e!==t.friend?(j(Object(d.c)()),Object(n.a)(Object(n.a)({},t),{},{friend:e,term:z||void 0,page:1})):t}))}),[E,y,z,j,u]),Object(o.useEffect)((function(){var e=setTimeout((function(){u((function(e){if(q!==e.page){if(!(1===e.page&&q<1))return j(Object(d.c)()),Object(n.a)(Object(n.a)({},e),{},{page:Math.max(1,q)});R(1)}return e})),clearTimeout(e)}),1e3);return function(){return clearTimeout(e)}}),[q,u,j]),Object(o.useEffect)((function(){var e;void 0===s.friend?(C(!1),S(!1)):s.friend?(C(!0),S(!1)):(C(!1),S(!0)),R(s.page),M(null!==(e=s.term)&&void 0!==e?e:"")}),[s]),Object(o.useEffect)((function(){var e=setTimeout((function(){G(),clearTimeout(e)}),1e3);return function(){return clearTimeout(e)}}),[G]),Object(l.c)(p,(function(){k("down")})),Object(O.jsxs)("div",{className:N.a.filterUsers,ref:p,children:[Object(O.jsxs)("div",{className:N.a.title,onClick:function(){k((function(e){return"down"===e?"up":"down"}))},children:[Object(O.jsx)("span",{children:"Parameters"}),Object(O.jsx)("div",{className:b({arrow:!0,arrowD:m}),children:Object(O.jsx)(f,{size:"10px",type:w,color:"#8ea6f4"})})]}),Object(O.jsxs)("div",{className:b({popup:!0,popupD:m,showPopup:"up"===w}),children:[Object(O.jsxs)("div",{className:N.a.term,children:[Object(O.jsx)("div",{className:N.a.magnifier,onClick:function(){return V()},children:Object(O.jsx)(x,{size:"15px"})}),Object(O.jsx)("input",{type:"text",id:"term",placeholder:"Search",autoComplete:"off",value:z,disabled:c,onChange:function(e){return M(e.currentTarget.value)},onKeyDown:V}),Object(O.jsx)("div",{className:b({clearTerm:!0,clearTermVisible:!!z.trim()}),onClick:function(){M(""),u((function(e){return void 0!==e.term?(j(Object(d.c)()),Object(n.a)(Object(n.a)({},e),{},{term:void 0,page:1})):e}))},children:Object(O.jsx)(g.a,{size:"15px"})})]}),Object(O.jsxs)("div",{className:N.a.toggles,children:[Object(O.jsxs)("label",{children:[Object(O.jsx)(U,{checked:E,disabled:c,onChange:function(e){y&&S(!1),C(e.currentTarget.checked)}}),Object(O.jsx)("span",{children:"Only friends"})]}),Object(O.jsxs)("label",{children:[Object(O.jsx)(U,{checked:y,disabled:c,onChange:function(e){E&&C(!1),S(e.currentTarget.checked)}}),Object(O.jsx)("span",{children:"Hide friends"})]})]}),Object(O.jsxs)("div",{className:b({page:!0,pageD:m}),children:[Object(O.jsx)("input",{type:"text",inputMode:"numeric",id:"page",value:q,autoComplete:"off",onChange:function(e){var t=+e.target.value;t<=i&&R(t)}}),Object(O.jsxs)("label",{htmlFor:"page",children:["Page ",Object(O.jsxs)("sup",{className:N.a.maxPage,children:["max: ",i]})]})]})]})]})},F=c(11),E=c(31),C=c(32),T=c(41),P=Object(T.a)([function(e){return e.users.inFollowProgress},function(e,t){return t}],(function(e,t){return e.some((function(e){return e===t}))})),y=c(63),S=c(267),B=c.n(S),L=function(e){var t=e.photos.large,c=e.followed,n=e.id,s=e.name,i=a.a.bind(B.a),u=Object(o.useState)(!1),d=Object(r.a)(u,2),f=d[0],p=d[1],m=Object(l.a)().isDarkMode,h=Object(j.a)((function(e){return P(e,n)}));return Object(O.jsxs)("li",{className:i({user:!0,userD:m}),children:[Object(O.jsx)(F.b,{className:B.a.link,to:"/profile/".concat(n)}),Object(O.jsxs)("div",{className:B.a.photo,children:[Object(O.jsx)(F.b,{to:"/profile/".concat(n),children:Object(O.jsx)("img",{src:t||(m?C.a:E.a),loading:"lazy",alt:"user",onLoad:function(){return p(!0)}})}),!f&&Object(O.jsx)("div",{className:B.a.photoPreloader,children:Object(O.jsx)(b.a,{})})]}),Object(O.jsxs)("div",{className:B.a.col,children:[Object(O.jsx)("div",{className:B.a.username,children:Object(O.jsx)("span",{children:s})}),Object(O.jsx)("div",{className:B.a.followBtn,children:Object(O.jsx)(y.a,{inFollowProcess:h,followed:c,userId:n})})]})]})},z=c(268),M=c.n(z);t.default=function(){var e=a.a.bind(M.a),t=Object(u.a)(),c=Object(i.h)(),s=new URLSearchParams(Object(i.g)().search),f=Object(o.useRef)(null),p=Object(j.a)((function(e){return e.users})),m=p.totalCount,_=p.users,g=Object(l.a)().isDarkMode,x=Object(o.useState)(!1),v=Object(r.a)(x,2),w=v[0],U=v[1],k=Object(o.useState)({count:40,page:Number(s.get("page"))||1,term:s.get("term")||void 0,friend:!!s.get("friend")||void 0}),N=Object(r.a)(k,2),F=N[0],E=N[1],C=Math.ceil((null!==m&&void 0!==m?m:1)/F.count),T=Object(o.useCallback)((function(){var e=F.page,t=F.friend,n=F.term,s=Object.entries({friend:t,term:n}).reduce((function(e,t){var c=Object(r.a)(t,2),n=c[0],s=c[1];return void 0!==s&&(e+="&".concat(n,"=").concat(s)),e}),"?page=".concat(e));c({search:s})}),[F,c]);return Object(o.useEffect)((function(){var e=f.current,t=new IntersectionObserver((function(e){Object(r.a)(e,1)[0].isIntersecting&&!w&&m&&F.page<C&&(U(!0),E((function(e){return Object(n.a)(Object(n.a)({},e),{},{page:e.page+1})})))}));return e&&t.observe(e),function(){e&&t.unobserve(e)}}),[m,w,C,F.page,f]),Object(o.useEffect)((function(){U(!0),t(Object(d.b)(F)).then((function(){U(!1),T()}))}),[t,F,T]),Object(o.useEffect)((function(){return function(){t(Object(d.c)())}}),[t]),Object(O.jsxs)("section",{className:M.a.users,children:[Object(O.jsxs)("div",{className:e({header:!0,headerD:g}),children:[Object(O.jsx)("div",{className:M.a.usersFound,children:Object(O.jsxs)("span",{children:["Users found: ",null===m||void 0===m?void 0:m.toLocaleString()]})}),Object(O.jsx)(D,{queryParams:F,setQueryParams:E,fetching:w,pageCount:C})]}),null===m?Object(O.jsx)("div",{className:M.a.preloader,children:Object(O.jsx)(b.a,{})}):m&&_.length?Object(O.jsxs)("ul",{className:M.a.usersList,children:[_.map((function(e){return Object(o.createElement)(L,Object(n.a)(Object(n.a)({},e),{},{key:e.id}))})),w&&Object(O.jsx)("div",{className:M.a.preloader,children:Object(O.jsx)(b.a,{})}),Object(O.jsx)("div",{ref:f})]}):Object(O.jsxs)("div",{className:e({notFound:!0,notFoundD:g}),children:[Object(O.jsx)("div",{className:M.a.text,children:F.friend?Object(O.jsxs)("span",{children:["Friend",Object(O.jsx)("span",{className:M.a.term,children:' "'.concat(F.term,'" ')}),"not found"]}):Object(O.jsxs)("span",{children:["No results for",Object(O.jsx)("span",{className:M.a.term,children:' "'.concat(F.term,'" ')})]})}),Object(O.jsx)("button",{type:"reset",onClick:function(){t(Object(d.c)()),E((function(e){return Object(n.a)(Object(n.a)({},e),{},{page:1,term:void 0,friend:void 0})}))},children:"Reset params"})]}),Object(O.jsx)("div",{className:M.a.scrollBtn,children:Object(O.jsx)(h,{})})]})}}}]);
//# sourceMappingURL=5.789cafcc.chunk.js.map